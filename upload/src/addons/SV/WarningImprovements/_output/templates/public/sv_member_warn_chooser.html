<link rel="stylesheet" href="styles/chosen/chosen.min.css" />

<xf:css src="sv_member_warn_chooser.less" />

<xf:js addon="SV/WarningImprovements" src="sv/chosen/chosen.jquery.js" min="1" /><xf:comment>missing?</xf:comment>
<xf:js addon="SV/WarningImprovements" src="sv/warningimprovements/warnings.js" min="1" />

<div id="warningViewSelect" class="JsOnly" style="display: none;">
	<xf:formrow label="{{ phrase('warning_type') }}">
		<xf:select name="warning_definition_id" value="{$xf.visitor.style_id}" label="{{ phrase('style') }}" class="warningItems WarningSelector"
				   data-no-results-text="{{ phrase('sv_no_results_match') }}"
				   data-place-holder-text="{{ phrase('sv_choose_a_warning') }}">
			<xf:option value=""></xf:option>
			<xf:optgroup label="{$warningCategory.title}">
				<xf:foreach loop="$warningCategory.warnings" value="$warning">
					<xf:option class="warningDefinition" value="{$warning.warning_definition_id}">{$warning.title}</xf:option>
				</xf:foreach>
			</xf:optgroup>
		</xf:select>
	</xf:formrow>
	
	<xf:textboxrow name="title" label="{{ phrase('custom_warning') }}" />
</div>

<div id="warningViewRadio">
	<xf:formrow label="{{ phrase('warning_type') }}">
		<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
			<xf:set var="$category" value="{$treeEntry.record}" />
			<div class="u-depth{$treeEntry.depth}">
				<div class="dataList-mainRow">{$category.title}</div>
			</div>

			<xf:if is="{$warnings.{$category.warning_category_id}} is not empty">
				<xf:foreach loop="{$warnings.{$category.warning_category_id}}" value="$warningDefinition">
					<xf:radio name="warning_definition_id" value="0">
						<xf:option value="{$warningDefinition.warning_definition_id}" class="js-FormFiller" label="{$warningDefinition.title}">
							<xf:dependent>
								<xf:if is="{$warningDefinition.sv_custom_title}">
									<xf:textbox name="custom_titlez" maxlength="{{ max_length($warningDefinition, 'title') }}" value="{$warningDefinition.title}" />
								</xf:if>
							</xf:dependent>
						</xf:option>
					</xf:radio>
				</xf:foreach>
			</xf:if>
		</xf:foreach>
	</xf:formrow>
</div>

<a id="warningViewToggle" class="WarningViewToggler JsOnly" href="#"
	data-selectview="#warningViewSelect"
	data-radioview="#warningViewRadio"
	data-toggleselecttext="{{ phrase('sv_toggle_select_view') }}"
	data-toggleradiotext="{{ phrase('sv_toggle_radio_view') }}"></a>